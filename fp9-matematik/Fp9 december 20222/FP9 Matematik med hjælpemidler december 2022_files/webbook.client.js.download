webpackJsonp([0],{100:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Toolbar=t.Content=t.TOC=void 0;var r=o(101),i=n(r),a=o(105),s=n(a),l=o(123),u=n(l);t.TOC=i.default,t.Content=s.default,t.Toolbar=u.default},101:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){w.Actions.setWebbookState({query:e,tocVisible:this.state.tocVisible}),this._onTOCQueryChange(e)}function l(e){var t=this;_.default.tocQuery(this.props.productId,e).then(function(e){return e.json()}).then(function(o){if(t.setState({toc:f(o.data.TOC)}),e?window.history.replaceState({},"",""+window.location.origin+window.location.pathname+"?query="+e):window.history.replaceState({},"",""+window.location.origin+window.location.pathname),e){var n=o.data.FilterMatchCount||0;T.default.addClientEvent("6",{query:e,numberOfResults:n}),T.default.send()}}).catch(function(e){console.error("Book query failed")})}function u(){w.Actions.setWebbookState({tocVisible:!this.state.tocVisible})}function c(){var e=w.Store.getState();this.setState({media:e.media,query:e.webbook.query,tocVisible:e.webbook.tocVisible})}function f(e,t){for(var o=e.Children,n=0;n<o.length;n++)o[n].ChapterNr=n+1,o[n].IsActiveChapter=p(o[n],t);return e}function p(e,t){if(e.Link.Uri===t)return!0;if(e.Children.length>0)for(var o=0;o<e.Children.length;o++){var n=p(e.Children[o],t);if(n)return!0}return!1}Object.defineProperty(t,"__esModule",{value:!0});var d=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),h=o(0),m=n(h),g=o(1),y=n(g),v=o(102),b=n(v),w=o(4),E=o(30),_=n(E),k=o(12),C=n(k),x=o(17),T=n(x),O=function(e){function t(e){r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return o.state=w.Store.getState().webbook,o.state.query=e.query,o.state.toc=f(e.toc,e.pathName),o.onQueryChange=s.bind(o),o._onTOCQueryChange=(0,C.default)(l.bind(o),300),o.storeChange=c.bind(o),o.onTocToggle=u.bind(o),o}return a(t,e),d(t,[{key:"componentDidMount",value:function(){w.Store.addChangeListener(this.storeChange)}},{key:"componentWillUnmount",value:function(){w.Store.removeChangeListener(this.storeChange)}},{key:"render",value:function(){var e=this.props,t=e.tocFixed,o=e.pathName,n=e.preserveSalesTextQueryString,r=e.toolbarItems,i=this.state,a=i.toc,s=i.query,l=i.tocVisible,u=this.props.localizations.SearchContentPlaceholder;return m.default.createElement(b.default,{toc:a,localizations:{SearchContentPlaceholder:u},toolbarItems:r,onQueryChange:this.onQueryChange,tocQuery:s,tocFixed:t,tocVisible:l,tocToggle:this.onTocToggle,storageKey:"scroll-pos-"+a.Link.Uri,pathName:o,preserveSalesTextQueryString:n})}}]),t}(m.default.PureComponent);O.propTypes={toc:y.default.object.isRequired,localizations:y.default.object.isRequired,toolbarItems:y.default.arrayOf(y.default.object).isRequired,query:y.default.string,preserveSalesTextQueryString:y.default.bool,productId:y.default.string},t.default=O},102:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t,o,n,r,i,a){if(e.length){var s=e.map(function(e,s){return d.default.createElement(k,{tocItem:e,showChapterNumbers:a&&i,tocQuery:t,storageKey:o,key:s,pathName:n,isCurrentPage:n===e.Link.Uri,preserveSalesTextQueryString:r})});return d.default.createElement("ul",{className:a?"product-toc-list":""},s)}}function l(e,t){if(window.sessionStorage&&e){document.referrer.includes(t)||window.sessionStorage.removeItem(e);var o=document.querySelector(C),n=sessionStorage.getItem(e);if(!n||"0"===n){var r=document.querySelector(".product-toc-list li.active");return void(r&&r.scrollIntoView(!1))}o.scrollTop=+n}}function u(e){if(!window.sessionStorage||!e)return!0;var t=document.querySelector(C);return window.sessionStorage.setItem(e,t.scrollTop),!0}function c(e){if(!window.sessionStorage||!e)return!0;window.sessionStorage.setItem(e,0)}Object.defineProperty(t,"__esModule",{value:!0});var f=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),p=o(0),d=n(p),h=o(1),m=n(h),g=o(2),y=o(103),v=n(y),b=o(104),w=n(b),E=o(3),_=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={},e}return a(t,e),f(t,[{key:"componentDidMount",value:function(){var e=this.props.storageKey;this.props.toc.IsCurrentPage||l(e,this.props.toc.Link.Uri)}},{key:"render",value:function(){var e=this,t=["product-toc-items"];this.props.tocVisible&&t.push("show"),this.props.tocFixed&&t.push("toc-fixed");var o=this.props.toolbarItems.find(function(e){return"Info"==e.Type}),n=o?d.default.createElement("div",{className:"product-toc-tools"},d.default.createElement("a",{href:o.Url,title:o.Tooltip},d.default.createElement(E.Info,{width:"20px",height:"20px",svgConfig:{foregroundColor:"#FFFFFF"}}))):null;return d.default.createElement("div",{className:"product-toc-wrapper"},d.default.createElement("div",{className:t.join(" "),ref:function(t){return e.toc=t}},d.default.createElement(v.default,{toc:this.props.toc,query:this.props.tocQuery,tocToggle:this.props.tocToggle,onClick:c.bind(null,this.props.storageKey)}),d.default.createElement(w.default,{localizations:this.props.localizations,onChange:this.props.onQueryChange,value:this.props.tocQuery}),d.default.createElement("div",{className:"product-toc"},d.default.createElement("div",{className:"toc-container"},s(this.props.toc.Children,this.props.tocQuery,this.props.storageKey,this.props.pathName,this.props.preserveSalesTextQueryString,this.props.toc.ShowNumbers,!0))),n))}}]),t}(d.default.PureComponent);_.propTypes={toc:m.default.object.isRequired,localizations:m.default.object.isRequired,onQueryChange:m.default.func.isRequired,tocVisible:m.default.bool.isRequired,tocToggle:m.default.func.isRequired,tocQuery:m.default.string,userHasAccess:m.default.bool};var k=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={},e}return a(t,e),f(t,[{key:"render",value:function(){var e=this.props,t=e.tocItem,o=e.showChapterNumbers,n=e.tocQuery,r=e.storageKey,i=e.pathName,a=e.isCurrentPage,l=e.preserveSalesTextQueryString,c=null,f={marginRight:"10px"};a&&Object.assign(f,{color:"#fff",fontWeight:"bold"}),o&&(c=d.default.createElement("span",{style:f},t.ChapterNr,"."));var p=n?t.Link.Uri+"?query="+n:t.Link.Uri;l&&(p=p.indexOf("?")>0?p+"&salesPreview=True":p+"?salesPreview=True");var h=(0,g.ClassNames)({tocMatch:t.HasMatch,tocNoMatch:!t.HasMatch});return d.default.createElement("li",{className:t.IsActiveChapter?"active":""},d.default.createElement("div",{className:"toc-title"},c,t.Link.PresentationTitleText?d.default.createElement("a",{style:a?f:null,href:p,title:t.Link.Tooltip,className:h,onClick:u.bind(null,r),dangerouslySetInnerHTML:{__html:t.Link.PresentationTitleText}}):d.default.createElement("a",{style:a?f:null,href:p,title:t.Link.Tooltip,className:h,onClick:u.bind(null,r)},t.Link.Text),t.IsCurrentPage?d.default.createElement("span",{className:"toc-current"},d.default.createElement(E.ChevronDouble,{width:"10px",height:"10px",svgConfig:{foregroundColor:"#fff",transform:"rotate(180,5,5)"}})):null),t.Children.length>0?s(t.Children,n,r,i,l):null)}}]),t}(d.default.PureComponent),C=".product-toc";t.default=_},103:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),l=o(0),u=n(l),c=o(1),f=n(c),p=o(2),d=(o(6),o(3)),h=function(e){function t(e){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return a(t,e),s(t,[{key:"render",value:function(){var e=(0,p.ClassNames)({"product-toc-title":!0}),t=(0,p.ClassNames)({tocMatch:this.props.toc.HasMatch,tocNoMatch:!this.props.toc.HasMatch}),o=this.props.query?this.props.toc.Link.Uri+"?query="+this.props.query:this.props.toc.Link.Uri,n=this.props.toc.IsCurrentPage?{color:"#fff"}:null;return u.default.createElement("div",{className:e},u.default.createElement("div",{onClick:this.props.tocToggle,className:"toc-toggle-bubble"},u.default.createElement(d.XBubble,{svgConfig:{foregroundColor:"#000",backgroundColor:"#fff"}})),u.default.createElement("div",{className:"webbook-title"},this.props.toc.Link.PresentationTitleText?u.default.createElement("a",{href:o,title:this.props.toc.Link.Tooltip,className:t,style:n,dangerouslySetInnerHTML:{__html:this.props.toc.Link.PresentationTitleText},onClick:this.props.onClick}):u.default.createElement("a",{href:o,title:this.props.toc.Link.Tooltip,className:t,style:n,onClick:this.props.onClick},this.props.toc.Link.Text)),this.props.toc.IsCurrentPage?u.default.createElement("span",{className:"toc-current"},u.default.createElement(d.ChevronDouble,{width:"10px",height:"10px",svgConfig:{foregroundColor:"#fff",transform:"rotate(180,5,5)"}})):null)}}]),t}(u.default.Component);h.propTypes={toc:f.default.shape({IsCurrentPage:f.default.bool,HasMatch:f.default.bool,Link:f.default.shape({Text:f.default.string.isRequired,Uri:f.default.string.isRequired,Tooltip:f.default.string.isRequired}).isRequired}).isRequired,tocToggle:f.default.func,query:f.default.string},t.default=h},104:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),l=o(0),u=n(l),c=o(1),f=n(c),p=o(28),d=n(p),h=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"render",value:function(){return u.default.createElement("div",{className:"product-toc-search"},u.default.createElement(d.default,{onChange:this.props.onChange,value:this.props.value,placeholder:this.props.localizations.SearchContentPlaceholder}))}}]),t}(u.default.Component);h.propTypes={localizations:f.default.object.isRequired,onChange:f.default.func.isRequired,value:f.default.string.isRequired},t.default=h},105:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(){var e=y.Store.getState();this.setState({media:e.media,tocVisible:e.webbook.tocVisible,query:e.webbook.query})}function l(){y.Actions.setWebbookState({tocVisible:!this.state.tocVisible})}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},c=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),f=o(0),p=n(f),d=o(1),h=n(d),m=o(106),g=n(m),y=o(4),v=function(e){function t(e){r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return o.state=y.Store.getState().webbook,o.state.query=e.query,o.storeChange=s.bind(o),o.onTocToggle=l.bind(o),o}return a(t,e),c(t,[{key:"componentDidMount",value:function(){y.Store.addChangeListener(this.storeChange)}},{key:"componentWillUnmount",value:function(){y.Store.removeChangeListener(this.storeChange)}},{key:"render",value:function(){var e=this.props,t=e.page,o=e.hasStructuredData,n=this.state,r=n.query,i=n.tocVisible,a=n.media,s=this.props.localizations.SearchContentPlaceholder;return p.default.createElement(g.default,u({localizations:{SearchContentPlaceholder:s}},t,{Query:r,tocVisible:i,tocToggle:this.onTocToggle,media:a,storageKey:"scroll-pos-"+t.TOC.Link.Uri,hasStrucuredData:o}))}}]),t}(p.default.PureComponent);v.propTypes={localizations:h.default.object.isRequired,query:h.default.string,page:h.default.object,hasStructuredData:h.default.bool},t.default=v},106:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){var t=e.target,o=this.props.media;if(u(t)){var n=t.getAttribute("src"),r=t.getAttribute("alt"),i="",a=t.nextSibling;return null!==a&&"FIGCAPTION"===a.nodeName&&(i=a.innerHTML),void this.setState({lightBoxSrc:n,lightBoxAlt:r,lightBoxFigCaption:i})}var s=c(t);if(s&&"mobile"===o)return void f(s)}function l(e){var t=e.target;clearTimeout(V);var o=c(t);o&&(clearTimeout(K),V=setTimeout(function(){d(o)},300))}function u(e){return"img"===e.tagName.toLowerCase()&&"figure"===e.parentElement.tagName.toLowerCase()||"img"===e.tagName.toLowerCase()&&"true"===e.dataset.lightbox}function c(e){if("explanation"===e.className)return e;for(var t=e.parentNode;t;){if("explanation"===t.className)return t;if(t.classList.contains("webbook-content"))return null;t=t.parentNode}return null}function f(e){var t=e.dataset.explanation;L.Actions.showOverlay({renderChild:function(){return w.default.createElement("div",{className:"explanationTransparent"},w.default.createElement("div",{className:"explanationWrapperOverlay"},w.default.createElement("div",{className:"explanationHeader"},w.default.createElement("div",{className:"explanationTextImage"},w.default.createElement(I.DocumentBubble,{width:"50px",height:"50px",svgConfig:{backgroundColor:q.Constants.Colors.bluePrimary}})),w.default.createElement("div",{className:"explanationClose",onClick:p},w.default.createElement(I.X,{width:"15px",height:"15px"}))),w.default.createElement("span",{className:"explanationText",dangerouslySetInnerHTML:{__html:t}})))},config:{contentStyle:{backgroundColor:"transparent",borderTopColor:q.Constants.Colors.darkSand},fullPage:!0,keepScrollPosition:!0}})}function p(){L.Actions.hideOverlay({keepScrollPosition:!0})}function d(e){if(!e.querySelector(".explanationWrapper")&&document.querySelector(".explanationWrapper")){var t=document.querySelector(".explanationWrapper");t.parentElement.removeChild(t)}if(!e.querySelector(".explanationWrapper")){var o=e.getClientRects()[0],n=e.dataset.explanation,r=document.createElement("div"),i=document.createElement("span"),a=document.createElement("div"),s=document.createElement("div"),l=document.createElement("div");s.className="explanationWrapperArrow",l.className="explanationWrapperArrowBorder",r.className="explanationWrapper",a.className="explanationTextImage",i.className="explanationText",i.innerHTML=n,r.appendChild(a),r.appendChild(i),r.appendChild(s),r.appendChild(l),e.appendChild(r),r.style.top=o.height+"px";var u=document.querySelector("body").getClientRects()[0].right-10,c=document.querySelector(".explanationWrapper").offsetWidth,f=u-(o.left+c),p=-r.getClientRects()[0].width/2+o.width/2,d=Math.min(p,f);r.style.left=d+"px";var m=document.querySelector(".explanationWrapperArrow").getClientRects()[0],g=o.left+o.width/2,y=m.left+m.width/2;s.style.marginLeft=g-y+"px",l.style.marginLeft=g-y-1+"px"}e.addEventListener("mouseleave",h)}function h(e){K=setTimeout(function(){var t=document.querySelector(".explanationWrapper");t&&t.parentElement.removeChild(t),e.target.removeEventListener("mouseleave",h)},200)}function m(){function e(e){e.addEventListener("click",function(t){t.preventDefault();var o=e.getAttribute("href"),n=o?document.querySelector(o):document.querySelector(".sales-overlay-wrapper");o?window.history.pushState(null,null,o):window.history.pushState(null,null,"#gainAccess"),n&&window.scroll({top:n.offsetTop,behavior:"smooth"})})}document.querySelectorAll(".onpagetoc a").forEach(e),window.addEventListener("popstate",function(e){window.location.hash||window.scrollTo(0,0)},!1)}function g(){document.querySelectorAll("figure.media-audio audio").forEach(H.AudioPlayerEventHandler)}function y(){this.setState({showMobileReviewNotification:!1})}Object.defineProperty(t,"__esModule",{value:!0});var v=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),b=o(0),w=n(b),E=o(1),_=n(E),k=o(107),C=n(k),x=o(108),T=n(x),O=o(109),N=n(O),S=o(110),P=o(111),R=n(P),I=o(3),j=o(32),M=n(j),q=o(2),L=o(4),F=o(113),A=n(F),B=o(114),U=n(B),z=o(21),W=o(120),D=n(W),H=o(121);(0,U.default)();var Q=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={lightBoxSrc:"",lightBoxAlt:"",lightBoxFigCaption:"",showMobileReviewNotification:!1},e._markInstanceSetup={element:"span",className:"match",acrossElements:!0,separateWordSearch:!1,ignoreJoiners:!0},e.onBodyClick=s.bind(e),e.onBodyMouseOver=l.bind(e),e.onMobileReviewNotificationClicked=y.bind(e),e}return a(t,e),v(t,[{key:"componentDidMount",value:function(){var e=this._content;this._contentMarker=new R.default(e);var t=this._title;if(this._titleMarker=new R.default(t),this._contentMarker.mark(this.props.Query,this._markInstanceSetup),this._titleMarker.mark(this.props.Query,this._markInstanceSetup),(new A.default).init(),m(),g(),this.props.ReviewModel){var o=this.props.ReviewModel,n=o.ShouldDisplayReviewPopup,r=o.ProductId,i=o.ProductTitle,a=o.Localizations;if(n){L.Actions.initMediaQuery();var s=L.Store.getState();s.media&&"mobile"===s.media?this.setState({showMobileReviewNotification:!0}):(0,z.ReviewModalInit)(null,r,i,a,null,!0)}}}},{key:"componentDidUpdate",value:function(e,t){var o=this;e.Query!==this.props.Query&&(this._contentMarker.unmark({done:function(){o._contentMarker.mark(o.props.Query,o._markInstanceSetup)}}),this._titleMarker.unmark({done:function(){o._titleMarker.mark(o.props.Query,o._markInstanceSetup)}}))}},{key:"render",value:function(){var e=this,t=(0,q.ClassNames)({"h1-hero":this.props.IsFrontPage,wrap:!0}),o=this.props.Access.HasAccess?null:w.default.createElement(N.default,{text:this.props.OverlaySalesText}),n=this.props.IsFrontPage&&this.props.ReviewModel?w.default.createElement(M.default,{review:this.props.ReviewModel,enableReviewForm:this.props.Access.CanReview}):null,r=this.props.ForceShowRating||this.props.IsFrontPage||!this.props.Access.HasAccess||!this.props.Access.LoggedIn,i=(0,q.ClassNames)({"webbook-content-aside":!0,"is-frontpage":this.props.IsFrontPage}),a=(0,q.ClassNames)({"is-frontpage":this.props.IsFrontPage}),s=this.state.showMobileReviewNotification&&this.props.ReviewModel?w.default.createElement(D.default,{productId:this.props.ReviewModel.ProductId,productTitle:this.props.ReviewModel.ProductTitle,localizations:this.props.ReviewModel.Localizations,onNotificationClicked:this.onMobileReviewNotificationClicked.bind()}):null;return w.default.createElement("div",{className:"webbook-content-wrapper"},w.default.createElement(T.default,{reviews:this.props.ReviewModel,breadCrumbItems:this.props.Breadcrumbs,showRating:r&&!!this.props.ReviewModel,bookTitle:this.props.BookTitle,bookUri:this.props.BookUri.Uri,tocToggle:this.props.tocToggle,tocVisible:this.props.tocVisible}),s,w.default.createElement("div",{className:"webbook-content"},w.default.createElement("div",{className:i},this.props.Access.HasAccess?null:w.default.createElement(I.LockBubble,{width:"2.5em",height:"2.5em",className:"lock "+t,svgConfig:{backgroundColor:"white",lockColor:q.Constants.Colors.darkGray}})),w.default.createElement("article",{className:"serif"},w.default.createElement("header",{className:a},this.props.PresentationTitle?w.default.createElement("h1",{className:t,ref:function(t){return e._title=t},dangerouslySetInnerHTML:{__html:this.props.PresentationTitle}}):w.default.createElement("h1",{className:t,ref:function(t){return e._title=t}},this.props.Title),this.props.Access.HasAccess?null:w.default.createElement(I.LockBubble,{width:"2.5em",height:"2.5em",svgConfig:{backgroundColor:"white",lockColor:q.Constants.Colors.darkGray}})),w.default.createElement("div",{onClick:this.onBodyClick,onMouseOver:"mobile"!==this.props.media?this.onBodyMouseOver:null,dangerouslySetInnerHTML:{__html:this.props.Content},ref:function(t){return e._content=t}}))),o,w.default.createElement("div",{className:"webbook-content"},w.default.createElement(C.default,{previousPage:this.props.PreviousPage,nextPage:this.props.NextPage,localizations:this.props.localizations,storageKey:this.props.storageKey})),n,w.default.createElement(S.LightBox,{src:this.state.lightBoxSrc,alt:this.state.lightBoxAlt,figCaption:this.state.lightBoxFigCaption,onClose:function(){e.setState({lightBoxSrc:"",lightBoxAlt:"",lightBoxFigCaption:""})}}))}}]),t}(w.default.PureComponent);Q.propTypes={Id:_.default.number,IsFrontPage:_.default.bool,Title:_.default.string.isRequired,Content:_.default.string.isRequired,Query:_.default.string,NextPage:_.default.shape({Text:_.default.string.isRequired,Uri:_.default.string.isRequired,Tooltip:_.default.string.isRequired}),PreviousPage:_.default.shape({Text:_.default.string.isRequired,Uri:_.default.string.isRequired,Tooltip:_.default.string.isRequired}),Breadcrumbs:_.default.arrayOf(_.default.shape({Text:_.default.string.isRequired,Uri:_.default.string.isRequired,Tooltip:_.default.string.isRequired})),OverlaySalesText:_.default.string,localizations:_.default.object.isRequired,ReviewModel:_.default.shape({Id:_.default.number,ProductId:_.default.string,ProductTitle:_.default.string,RatingsAvg:_.default.number,RatingsCount:_.default.number,RatingsWorst:_.default.number,RatingsBest:_.default.number,Reviews:_.default.array}),BookUri:_.default.shape({Uri:_.default.string}),BookTitle:_.default.string,BookImagePath:_.default.string,Access:_.default.shape({HasAccess:_.default.bool,CanReview:_.default.bool,LoggedIn:_.default.bool}),storageKey:_.default.string,ForceShowRating:_.default.bool,hasStructuredData:_.default.bool};var V=null,K=null;t.default=Q},107:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(){return this.clearStorage(),!0}function l(){this&&window.sessionStorage.removeItem(this)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),c=o(0),f=n(c),p=o(1),d=n(p),h=o(3),m=!1,g=!1,y={LEFT_KEY:37,RIGHT_KEY:39,ALT_KEY:18},v=function(e){function t(e){r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return o.onClick=s.bind(o),o.clearStorage=l.bind(e.storageKey),o}return a(t,e),u(t,[{key:"componentDidMount",value:function(){var e=this;(this.props.previousPage||this.props.nextPage)&&(document.addEventListener("keydown",function(t){return t.altKey?void(m=!0):t.metaKey?void(g=!0):void("INPUT"!==document.activeElement.tagName&&"TEXTAREA"!==document.activeElement.tagName&&(m||g||t.which!==y.LEFT_KEY&&t.which!==y.RIGHT_KEY||(e.clearStorage(),t.which===y.LEFT_KEY&&e.props.previousPage&&(window.location.href=e.props.previousPage.Uri),t.which===y.RIGHT_KEY&&e.props.nextPage&&(window.location.href=e.props.nextPage.Uri))))}),document.addEventListener("keyup",function(e){e.keyCode===y.ALT_KEY&&(m=!1),"Meta"===e.key&&(g=!1)}))}},{key:"render",value:function(){if(!this.props.nextPage&&!this.props.previousPage)return null;var e=null,t=null;return this.props.previousPage&&(t=f.default.createElement("a",{href:this.props.previousPage.Uri,title:this.props.previousPage.Tooltip,className:"previous-page",onClick:this.onClick},f.default.createElement(h.ArrowBubble,{width:"2.5em",height:"2.5em",svgConfig:{transform:"rotate(180 15 15)",backgroundColor:"#0075e3",foregroundColor:"#fff"}}),f.default.createElement("span",{className:"visible-inline-mobile"},this.props.localizations.PreviousPage),f.default.createElement("span",{className:"visible-inline-desktop"},this.props.previousPage.Text))),this.props.nextPage&&(e=f.default.createElement("a",{href:this.props.nextPage.Uri,title:this.props.nextPage.Tooltip,className:"next-page",onClick:this.onClick},f.default.createElement("span",{className:"visible-inline-mobile"},this.props.localizations.NextPage),f.default.createElement("span",{className:"visible-inline-desktop"},this.props.nextPage.Text),f.default.createElement(h.ArrowBubble,{width:"2.5em",height:"2.5em",svgConfig:{backgroundColor:"#0075e3",foregroundColor:"#fff"}}))),f.default.createElement("div",{className:"page-navigation"},t,e)}}]),t}(f.default.PureComponent);v.propTypes={nextPage:d.default.shape({Text:d.default.string.isRequired,Uri:d.default.string.isRequired,Tooltip:d.default.string.isRequired}),previousPage:d.default.shape({Text:d.default.string.isRequired,Uri:d.default.string.isRequired,Tooltip:d.default.string.isRequired}),localizations:d.default.shape({PreviousPage:d.default.string,NextPage:d.default.string})},t.default=v},108:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),l=o(0),u=n(l),c=o(1),f=n(c),p=o(31),d=n(p),h=o(18),m=n(h),g=o(3),y=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"render",value:function(){return u.default.createElement("header",{className:"webbook-header"},this.props.tocVisible?null:u.default.createElement("div",{className:"webbook-title"},u.default.createElement("div",{onClick:this.props.tocToggle,className:"webbook-list-bubble"},u.default.createElement(g.List3ItemsBubble,null)),u.default.createElement("div",{className:"title"},u.default.createElement("a",{href:this.props.bookUri,title:this.props.bookTitle},this.props.bookTitle))),u.default.createElement("div",{className:"webbook-content"},u.default.createElement(d.default,{items:this.props.breadCrumbItems}),this.props.showRating?v(this.props.reviews):null))}}]),t}(u.default.PureComponent);y.propTypes={breadCrumbItems:f.default.array,reviews:f.default.shape({ProductId:f.default.string,Id:f.default.number,ProductTitle:f.default.string,RatingsAvg:f.default.number,RatingsCount:f.default.number,Reviews:f.default.array}),tocToggle:f.default.func,tocVisible:f.default.bool,showRating:f.default.bool.isRequired,bookTitle:f.default.string,bookUri:f.default.string,hasStructuredData:f.default.bool};var v=function(e){var t=e.RatingsAvg,o=e.ReviewCount;return u.default.createElement("div",{className:"webbook-rating"},u.default.createElement("span",{title:t},(0,m.default)(t)),u.default.createElement("span",{className:"rating-count"},"[",o,"]"))};t.default=y},109:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),l=o(0),u=n(l),c=o(1),f=n(c),p=o(3),d=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return a(t,e),s(t,[{key:"render",value:function(){return u.default.createElement("div",{className:"sales-overlay-wrapper"},u.default.createElement(p.Lock,{className:"sales-overlay-lock",svgConfig:{foregroundColor:"#000"}}),u.default.createElement("div",{className:"sales-overlay"},u.default.createElement("div",{dangerouslySetInnerHTML:{__html:this.props.text}})))}}]),t}(u.default.Component);d.propTypes={text:f.default.string},t.default=d},110:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){27===e.which&&this.props.onClose()}function l(e){"lightbox-image"!==e.target.className&&"lightbox-caption"!==e.target.className&&this.props.onClose()}Object.defineProperty(t,"__esModule",{value:!0}),t.LightBox=void 0;var u=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),c=o(0),f=n(c),p=o(1),d=n(p),h=o(3),m=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onKeyUp=s.bind(e),e}return a(t,e),u(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e,t){e.src?(document.body.classList.add("overflow-hidden"),document.body.style.marginRight="17px",document.addEventListener("keyup",this.onKeyUp)):(document.body.classList.remove("overflow-hidden"),document.body.style.removeProperty("margin-right"))}},{key:"render",value:function(){return this.props.src?f.default.createElement("div",{className:"lightbox",onClick:l.bind(this)},f.default.createElement("div",{className:"lightbox-content"},f.default.createElement("img",{src:this.props.src,alt:this.props.alt||"",className:"lightbox-image"}),f.default.createElement("div",{className:"lightbox-close",onClick:this.props.onClose},f.default.createElement(h.XBubble,{svgConfig:{foregroundColor:"#FFFFFF"}})),this.props.figCaption?f.default.createElement("div",{className:"lightbox-caption",dangerouslySetInnerHTML:{__html:this.props.figCaption}}):null)):null}}]),t}(f.default.PureComponent);m.propTypes={src:d.default.string,alt:d.default.string,figCaption:d.default.string,onClose:d.default.func.isRequired},t.LightBox=m},111:function(e,t,o){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),a=function(){function e(t){n(this,e),this.ctx=t,this.ie=!1;var o=window.navigator.userAgent;(o.indexOf("MSIE")>-1||o.indexOf("Trident")>-1)&&(this.ie=!0)}return i(e,[{key:"log",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"debug",o=this.opt.log;this.opt.debug&&"object"===(void 0===o?"undefined":r(o))&&"function"==typeof o[t]&&o[t]("mark.js: "+e)}},{key:"escapeStr",value:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}},{key:"createRegExp",value:function(e){return"disabled"!==this.opt.wildcards&&(e=this.setupWildcardsRegExp(e)),e=this.escapeStr(e),Object.keys(this.opt.synonyms).length&&(e=this.createSynonymsRegExp(e)),this.opt.ignoreJoiners&&(e=this.setupIgnoreJoinersRegExp(e)),this.opt.diacritics&&(e=this.createDiacriticsRegExp(e)),e=this.createMergedBlanksRegExp(e),this.opt.ignoreJoiners&&(e=this.createIgnoreJoinersRegExp(e)),"disabled"!==this.opt.wildcards&&(e=this.createWildcardsRegExp(e)),e=this.createAccuracyRegExp(e)}},{key:"createSynonymsRegExp",value:function(e){var t=this.opt.synonyms,o=this.opt.caseSensitive?"":"i";for(var n in t)if(t.hasOwnProperty(n)){var r=t[n],i="disabled"!==this.opt.wildcards?this.setupWildcardsRegExp(n):this.escapeStr(n),a="disabled"!==this.opt.wildcards?this.setupWildcardsRegExp(r):this.escapeStr(r);""!==i&&""!==a&&(e=e.replace(new RegExp("("+i+"|"+a+")","gm"+o),"("+i+"|"+a+")"))}return e}},{key:"setupWildcardsRegExp",value:function(e){return e=e.replace(/(?:\\)*\?/g,function(e){return"\\"===e.charAt(0)?"?":""}),e.replace(/(?:\\)*\*/g,function(e){return"\\"===e.charAt(0)?"*":""})}},{key:"createWildcardsRegExp",value:function(e){var t="withSpaces"===this.opt.wildcards;return e.replace(/\u0001/g,t?"[\\S\\s]?":"\\S?").replace(/\u0002/g,t?"[\\S\\s]*?":"\\S*")}},{key:"setupIgnoreJoinersRegExp",value:function(e){return e.replace(/[^(|)\\]/g,function(e,t,o){var n=o.charAt(t+1);return/[(|)\\]/.test(n)||""===n?e:e+"\0"})}},{key:"createIgnoreJoinersRegExp",value:function(e){return e.split("\0").join("[\\u00ad|\\u200b|\\u200c|\\u200d]?")}},{key:"createDiacriticsRegExp",value:function(e){var t=this.opt.caseSensitive?"":"i",o=this.opt.caseSensitive?["aàáâãäåāąă","AÀÁÂÃÄÅĀĄĂ","cçćč","CÇĆČ","dđď","DĐĎ","eèéêëěēę","EÈÉÊËĚĒĘ","iìíîïī","IÌÍÎÏĪ","lł","LŁ","nñňń","NÑŇŃ","oòóôõöøō","OÒÓÔÕÖØŌ","rř","RŘ","sšśșş","SŠŚȘŞ","tťțţ","TŤȚŢ","uùúûüůū","UÙÚÛÜŮŪ","yÿý","YŸÝ","zžżź","ZŽŻŹ"]:["aàáâãäåāąăAÀÁÂÃÄÅĀĄĂ","cçćčCÇĆČ","dđďDĐĎ","eèéêëěēęEÈÉÊËĚĒĘ","iìíîïīIÌÍÎÏĪ","lłLŁ","nñňńNÑŇŃ","oòóôõöøōOÒÓÔÕÖØŌ","rřRŘ","sšśșşSŠŚȘŞ","tťțţTŤȚŢ","uùúûüůūUÙÚÛÜŮŪ","yÿýYŸÝ","zžżźZŽŻŹ"],n=[];return e.split("").forEach(function(r){o.every(function(o){if(-1!==o.indexOf(r)){if(n.indexOf(o)>-1)return!1;e=e.replace(new RegExp("["+o+"]","gm"+t),"["+o+"]"),n.push(o)}return!0})}),e}},{key:"createMergedBlanksRegExp",value:function(e){return e.replace(/[\s]+/gim,"[\\s]+")}},{key:"createAccuracyRegExp",value:function(e){var t=this,o=this.opt.accuracy,n="string"==typeof o?o:o.value,r="string"==typeof o?[]:o.limiters,i="";switch(r.forEach(function(e){i+="|"+t.escapeStr(e)}),n){case"partially":default:return"()("+e+")";case"complementary":return"()([^"+(i="\\s"+(i||this.escapeStr("!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~¡¿")))+"]*"+e+"[^"+i+"]*)";case"exactly":return"(^|\\s"+i+")("+e+")(?=$|\\s"+i+")"}}},{key:"getSeparatedKeywords",value:function(e){var t=this,o=[];return e.forEach(function(e){t.opt.separateWordSearch?e.split(" ").forEach(function(e){e.trim()&&-1===o.indexOf(e)&&o.push(e)}):e.trim()&&-1===o.indexOf(e)&&o.push(e)}),{keywords:o.sort(function(e,t){return t.length-e.length}),length:o.length}}},{key:"getTextNodes",value:function(e){var t=this,o="",n=[];this.iterator.forEachNode(NodeFilter.SHOW_TEXT,function(e){n.push({start:o.length,end:(o+=e.textContent).length,node:e})},function(e){return t.matchesExclude(e.parentNode)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},function(){e({value:o,nodes:n})})}},{key:"matchesExclude",value:function(e){return s.matches(e,this.opt.exclude.concat(["script","style","title","head","html"]))}},{key:"wrapRangeInTextNode",value:function(e,t,o){var n=this.opt.element?this.opt.element:"mark",r=e.splitText(t),i=r.splitText(o-t),a=document.createElement(n);return a.setAttribute("data-markjs","true"),this.opt.className&&a.setAttribute("class",this.opt.className),a.textContent=r.textContent,r.parentNode.replaceChild(a,r),i}},{key:"wrapRangeInMappedTextNode",value:function(e,t,o,n,r){var i=this;e.nodes.every(function(a,s){var l=e.nodes[s+1];if(void 0===l||l.start>t){if(!n(a.node))return!1;var u=t-a.start,c=(o>a.end?a.end:o)-a.start,f=e.value.substr(0,a.start),p=e.value.substr(c+a.start);if(a.node=i.wrapRangeInTextNode(a.node,u,c),e.value=f+p,e.nodes.forEach(function(t,o){o>=s&&(e.nodes[o].start>0&&o!==s&&(e.nodes[o].start-=c),e.nodes[o].end-=c)}),o-=c,r(a.node.previousSibling,a.start),!(o>a.end))return!1;t=a.end}return!0})}},{key:"wrapMatches",value:function(e,t,o,n,r){var i=this,a=0===t?0:t+1;this.getTextNodes(function(t){t.nodes.forEach(function(t){t=t.node;for(var r=void 0;null!==(r=e.exec(t.textContent))&&""!==r[a];)if(o(r[a],t)){var s=r.index;if(0!==a)for(var l=1;l<a;l++)s+=r[l].length;t=i.wrapRangeInTextNode(t,s,s+r[a].length),n(t.previousSibling),e.lastIndex=0}}),r()})}},{key:"wrapMatchesAcrossElements",value:function(e,t,o,n,r){var i=this,a=0===t?0:t+1;this.getTextNodes(function(t){for(var s=void 0;null!==(s=e.exec(t.value))&&""!==s[a];){var l=s.index;if(0!==a)for(var u=1;u<a;u++)l+=s[u].length;var c=l+s[a].length;i.wrapRangeInMappedTextNode(t,l,c,function(e){return o(s[a],e)},function(t,o){e.lastIndex=o,n(t)})}r()})}},{key:"unwrapMatches",value:function(e){for(var t=e.parentNode,o=document.createDocumentFragment();e.firstChild;)o.appendChild(e.removeChild(e.firstChild));t.replaceChild(o,e),this.ie?this.normalizeTextNode(t):t.normalize()}},{key:"normalizeTextNode",value:function(e){if(e){if(3===e.nodeType)for(;e.nextSibling&&3===e.nextSibling.nodeType;)e.nodeValue+=e.nextSibling.nodeValue,e.parentNode.removeChild(e.nextSibling);else this.normalizeTextNode(e.firstChild);this.normalizeTextNode(e.nextSibling)}}},{key:"markRegExp",value:function(e,t){var o=this;this.opt=t,this.log('Searching with expression "'+e+'"');var n=0,r="wrapMatches",i=function(e){n++,o.opt.each(e)};this.opt.acrossElements&&(r="wrapMatchesAcrossElements"),this[r](e,this.opt.ignoreGroups,function(e,t){return o.opt.filter(t,e,n)},i,function(){0===n&&o.opt.noMatch(e),o.opt.done(n)})}},{key:"mark",value:function(e,t){var o=this;this.opt=t;var n=0,r="wrapMatches",i=this.getSeparatedKeywords("string"==typeof e?[e]:e),a=i.keywords,s=i.length,l=this.opt.caseSensitive?"":"i";this.opt.acrossElements&&(r="wrapMatchesAcrossElements"),0===s?this.opt.done(n):function e(t){var i=new RegExp(o.createRegExp(t),"gm"+l),u=0;o.log('Searching with expression "'+i+'"'),o[r](i,1,function(e,r){return o.opt.filter(r,t,n,u)},function(e){u++,n++,o.opt.each(e)},function(){0===u&&o.opt.noMatch(t),a[s-1]===t?o.opt.done(n):e(a[a.indexOf(t)+1])})}(a[0])}},{key:"unmark",value:function(e){var t=this;this.opt=e;var o=this.opt.element?this.opt.element:"*";o+="[data-markjs]",this.opt.className&&(o+="."+this.opt.className),this.log('Removal selector "'+o+'"'),this.iterator.forEachNode(NodeFilter.SHOW_ELEMENT,function(e){t.unwrapMatches(e)},function(e){var n=s.matches(e,o),r=t.matchesExclude(e);return!n||r?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},this.opt.done)}},{key:"opt",set:function(e){this._opt=Object.assign({},{element:"",className:"",exclude:[],iframes:!1,iframesTimeout:5e3,separateWordSearch:!0,diacritics:!0,synonyms:{},accuracy:"partially",acrossElements:!1,caseSensitive:!1,ignoreJoiners:!1,ignoreGroups:0,wildcards:"disabled",each:function(){},noMatch:function(){},filter:function(){return!0},done:function(){},debug:!1,log:window.console},e)},get:function(){return this._opt}},{key:"iterator",get:function(){return this._iterator||(this._iterator=new s(this.ctx,this.opt.iframes,this.opt.exclude,this.opt.iframesTimeout)),this._iterator}}]),e}(),s=function(){function e(t){var o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5e3;n(this,e),this.ctx=t,this.iframes=o,this.exclude=r,this.iframesTimeout=i}return i(e,[{key:"getContexts",value:function(){var e=void 0,t=[];return e=void 0!==this.ctx&&this.ctx?NodeList.prototype.isPrototypeOf(this.ctx)?Array.prototype.slice.call(this.ctx):Array.isArray(this.ctx)?this.ctx:"string"==typeof this.ctx?Array.prototype.slice.call(document.querySelectorAll(this.ctx)):[this.ctx]:[],e.forEach(function(e){var o=t.filter(function(t){return t.contains(e)}).length>0;-1!==t.indexOf(e)||o||t.push(e)}),t}},{key:"getIframeContents",value:function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},n=void 0;try{var r=e.contentWindow;if(n=r.document,!r||!n)throw new Error("iframe inaccessible")}catch(e){o()}n&&t(n)}},{key:"isIframeBlank",value:function(e){var t="about:blank",o=e.getAttribute("src").trim();return e.contentWindow.location.href===t&&o!==t&&o}},{key:"observeIframeLoad",value:function(e,t,o){var n=this,r=!1,i=null,a=function a(){if(!r){r=!0,clearTimeout(i);try{n.isIframeBlank(e)||(e.removeEventListener("load",a),n.getIframeContents(e,t,o))}catch(e){o()}}};e.addEventListener("load",a),i=setTimeout(a,this.iframesTimeout)}},{key:"onIframeReady",value:function(e,t,o){try{"complete"===e.contentWindow.document.readyState?this.isIframeBlank(e)?this.observeIframeLoad(e,t,o):this.getIframeContents(e,t,o):this.observeIframeLoad(e,t,o)}catch(e){o()}}},{key:"waitForIframes",value:function(e,t){var o=this,n=0;this.forEachIframe(e,function(){return!0},function(e){n++,o.waitForIframes(e.querySelector("html"),function(){--n||t()})},function(e){e||t()})}},{key:"forEachIframe",value:function(t,o,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},a=t.querySelectorAll("iframe"),s=a.length,l=0;a=Array.prototype.slice.call(a);var u=function(){--s<=0&&i(l)};s||u(),a.forEach(function(t){e.matches(t,r.exclude)?u():r.onIframeReady(t,function(e){o(t)&&(l++,n(e)),u()},u)})}},{key:"createIterator",value:function(e,t,o){return document.createNodeIterator(e,t,o,!1)}},{key:"createInstanceOnIframe",value:function(t){return new e(t.querySelector("html"),this.iframes)}},{key:"compareNodeIframe",value:function(e,t,o){if(e.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_PRECEDING){if(null===t)return!0;if(t.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_FOLLOWING)return!0}return!1}},{key:"getIteratorNode",value:function(e){var t=e.previousNode(),o=void 0;return o=null===t?e.nextNode():e.nextNode()&&e.nextNode(),{prevNode:t,node:o}}},{key:"checkIframeFilter",value:function(e,t,o,n){var r=!1,i=!1;return n.forEach(function(e,t){e.val===o&&(r=t,i=e.handled)}),this.compareNodeIframe(e,t,o)?(!1!==r||i?!1===r||i||(n[r].handled=!0):n.push({val:o,handled:!0}),!0):(!1===r&&n.push({val:o,handled:!1}),!1)}},{key:"handleOpenIframes",value:function(e,t,o,n){var r=this;e.forEach(function(e){e.handled||r.getIframeContents(e.val,function(e){r.createInstanceOnIframe(e).forEachNode(t,o,n)})})}},{key:"iterateThroughNodes",value:function(e,t,o,n,r){for(var i=this,a=this.createIterator(t,e,n),s=[],l=[],u=void 0,c=void 0;function(){var e=i.getIteratorNode(a);return c=e.prevNode,u=e.node}();)this.iframes&&this.forEachIframe(t,function(e){return i.checkIframeFilter(u,c,e,s)},function(t){i.createInstanceOnIframe(t).forEachNode(e,o,n)}),l.push(u);l.forEach(function(e){o(e)}),this.iframes&&this.handleOpenIframes(s,e,o,n),r()}},{key:"forEachNode",value:function(e,t,o){var n=this,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},i=this.getContexts(),a=i.length;a||r(),i.forEach(function(i){var s=function(){n.iterateThroughNodes(e,i,t,o,function(){--a<=0&&r()})};n.iframes?n.waitForIframes(i,s):s()})}}],[{key:"matches",value:function(e,t){var o="string"==typeof t?[t]:t,n=e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector;if(n){var r=!1;return o.every(function(t){return!n.call(e,t)||(r=!0,!1)}),r}return!1}}]),e}();t.default=a},113:function(e,t,o){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),i=o(2),a=function(){function e(){n(this,e),this.init=e.init}return r(e,null,[{key:"init",value:function(){for(var t=document.querySelectorAll(".toggle-box"),o=0;o<t.length;o++){var n=t[o];n.querySelector(".toggle-box-header").addEventListener("click",e.onBoxToggleState.bind(null,n))}}},{key:"onBoxToggleState",value:function(e){if(e.classList.contains("open")){var t=e.querySelector(".toggle-box-content");t.style.maxHeight="0px",t.style.overflow="hidden",e.classList.remove("open")}else{var o=e.querySelector(".toggle-box-content");o.style.maxHeight=o.scrollHeight+"px",e.classList.add("open"),window.setTimeout(function(){o.style.overflow="visible"},i.Constants.Transitions.duration)}}}]),e}();t.default=a},114:function(e,t,o){"use strict";function n(){"undefined"!=typeof document&&setTimeout(function(){if(window.location.hash){window.scrollTo(0,0);var e=document.querySelector(window.location.hash);e&&window.scroll({top:e.offsetTop,behavior:"smooth"})}},1)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},120:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),l=o(0),u=n(l),c=o(1),f=n(c),p=o(20),d=n(p),h=o(21),m=o(6),g=o(3),y=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={showNotification:!0},e}return a(t,e),s(t,[{key:"render",value:function(){var e=this.props,t=e.productId,o=e.productTitle,n=e.localizations,r=e.onNotificationClicked,i={foregroundColor:"white"},a=u.default.createElement(m.Wrapper,{className:"close",ariaLabel:"Close",onClick:this._onNotificationClose.bind(this,r)},u.default.createElement(g.X,{svgConfig:i,width:"24px",height:"24px"}));return u.default.createElement("div",{className:"mobileReviewNotification"},u.default.createElement("div",{className:"mobileReviewNotificationText",onClick:this._onClick.bind(this,t,o,n,r)},n.MobileNotificationText),a)}},{key:"_onClick",value:function(e,t,o,n){(0,h.ReviewModalInit)(null,e,t,o,null,!0),n()}},{key:"_onNotificationClose",value:function(e){d.default.postponeReviews(),e()}}]),t}(u.default.PureComponent);y.propTypes={productId:f.default.string,productTitle:f.default.string,localizations:f.default.object,onNotificationClicked:f.default.func},t.default=y},121:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var o=(0,p.default)(s,2e3,{trailing:!0});e.addEventListener("play",function(){d[t]=a(e),o(e,d[t])}),e.addEventListener("seeked",function(){var n=d[t];n.playId&&(i(t),n.playId=null),d[t]=a(e),o(e,d[t])}),e.addEventListener("pause",i.bind(null,t)),window.addEventListener("beforeunload",function(){e.paused||i(t)})}function i(e){var t=d[e];if(t&&t.playId){var o=t.playId;t.playId=null;var n=new Date,r=(n-t.startTime)/1e3,i=Math.round(t.startPosition+r);u.default.add({name:5,parameters:JSON.stringify({stop:i,playId:o})}),u.default.send()}}function a(e){return{startPosition:e.currentTime,startTime:new Date,playId:null}}function s(e,t){if(!e.paused){var o=e.src,n=t.startPosition,r=Math.round(Math.abs(n)),i=(0,c.Create)();t.playId=i,u.default.add({name:4,parameters:JSON.stringify({start:r,src:o,playId:i})}),u.default.send()}}Object.defineProperty(t,"__esModule",{value:!0}),t.AudioPlayerEventHandler=r;var l=o(17),u=n(l),c=o(122),f=o(12),p=n(f),d={}},122:function(e,t,o){"use strict";function n(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(e){return(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)})}Object.defineProperty(t,"__esModule",{value:!0}),t.Create=n},123:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),l=o(0),u=n(l),c=o(1),f=n(c),p=o(124),d=n(p),h=function(e){function t(e){r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return o.state={},o}return a(t,e),s(t,[{key:"render",value:function(){return u.default.createElement(d.default,{items:this.props.items,localizations:this.props.localizations})}}]),t}(u.default.Component);h.propTypes={items:f.default.arrayOf(f.default.shape({Type:f.default.string.isRequired,Tooltip:f.default.string,Url:f.default.string})).isRequired,localizations:f.default.object.isRequired},t.default=h},124:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){switch(e.Type){case"Download":case"Info":return l(e);case"Favourite":return f.default.createElement(g.default,{webbookId:e.Parameters.webbookId,isFavourite:e.Parameters.isFavourite,className:"item",tooltip:e.Tooltip,localizations:t});default:throw Error("Invalid icon")}}function l(e){var t=void 0;switch(e.Type){case"Download":t=f.default.createElement(h.Download,{width:"20px",height:"20px"});break;case"Info":t=f.default.createElement(h.Info,{width:"20px",height:"20px",svgConfig:{foregroundColor:"#FFFFFF"}})}return f.default.createElement("a",{href:e.Url,className:"item"},f.default.createElement("span",{className:"tooltip"},e.Tooltip),t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),c=o(0),f=n(c),p=o(1),d=n(p),h=o(3),m=o(125),g=n(m),y=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return a(t,e),u(t,[{key:"render",value:function(){var e=this,t=this.props.items.reverse().map(function(t,o){return f.default.createElement("li",{key:o},s(t,e.props.localizations))});return f.default.createElement("div",{className:"toolbar webbook-toolbar"},t.length>0?f.default.createElement("ul",{className:"tools"},t):null)}}]),t}(f.default.Component);y.propTypes={items:d.default.arrayOf(d.default.shape({Type:d.default.string.isRequired,Tooltip:d.default.stringt,Url:d.default.string,Parameters:d.default.object})).isRequired,localizations:d.default.object.isRequired},t.default=y},125:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),l=o(0),u=n(l),c=o(3),f=o(1),p=n(f),d=o(4),h=o(30),m=n(h),g=function(e){function t(e){r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.state={isFavourite:e.isFavourite},o}return a(t,e),s(t,[{key:"render",value:function(){var e=this.props.localizations,t=e.FavouriteDeselect,o=e.FavouriteSelect,n=this.props.className,r={foregroundColor:"#FFFFFF"},i={svgConfig:r,width:"20px",height:"20px"},a=void 0;a=this.state.isFavourite?u.default.createElement(c.HeartFilled,i):u.default.createElement(c.Heart,i);var s=this.state.isFavourite?t:o;return u.default.createElement("div",{className:n,onClick:this._onClick.bind(this)},u.default.createElement("span",{className:"tooltip"},s),a)}},{key:"_onClick",value:function(){var e=this,t=this.props.localizations,o=t.FavouriteNotificationDeselect,n=t.FavouriteNotificationSelect;m.default.toggleFavourite(this.props.webbookId,!this.state.isFavourite).then(function(e){return e.json()}).then(function(t){d.Actions.setNotification({message:t.newValue?n:o}),e.setState({isFavourite:t.newValue})})}}]),t}(l.PureComponent);g.propTypes={webbookId:p.default.string.isRequired,isFavourite:p.default.bool.isRequired,className:p.default.string,localizations:p.default.object.isRequired},t.default=g},30:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={tocQuery:function(e,t){return fetch("/webservice/webbookpage/tocquery?pageProductId="+e+"&query="+t,{credentials:"same-origin"})},toggleFavourite:function(e,t){return fetch("/webservice/products/favourite/"+e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({value:t})})}}},98:function(e,t,o){"use strict";o(99)},99:function(e,t,o){(function(t){e.exports=t.Webbook=o(100)}).call(t,o(7))}},[98]);